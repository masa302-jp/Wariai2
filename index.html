<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é›»è»Šã§æ–‡ç« é¡Œãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ˆåˆ†æ•°ãƒ»å‰²åˆãƒ»ç·šåˆ†å›³ï¼‰ğŸš†</title>
<style>
  :root{
    --bg:#f7f8fb; --card:#ffffff; --ink:#222; --muted:#666; --accent:#2f7dff;
    --ok:#22bb66; --ng:#ff4d4f; --rail:#c9d3e6;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto,
      "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
    color:var(--ink);
    background:linear-gradient(180deg,#eef3ff 0%,#f8fbff 50%, var(--bg) 100%);
    display:flex; min-height:100svh; align-items:center; justify-content:center;
    padding:16px;
  }
  .app{
    background:var(--card); width:min(900px,100%);
    border-radius:16px; box-shadow:0 12px 40px rgba(0,0,0,.08);
    overflow:hidden; border:1px solid #e8eefc;
  }
  header{
    padding:16px 20px;
    display:flex; gap:12px; align-items:center; justify-content:space-between;
    border-bottom:1px solid #eef2fe;
  }
  header .title{ font-weight:800; letter-spacing:.02em; display:flex; gap:8px; align-items:center; }
  header .title .train{ font-size:24px }
  header .meta{ display:flex; gap:16px; color:var(--muted); font-size:14px; align-items:center; }
  header .pill{ background:#f1f5ff; color:#2a5bd7; padding:6px 10px; border-radius:999px; font-weight:700 }

  .track{
    position:relative; height:120px;
    background:linear-gradient(180deg,#fff,#fbfdff);
    display:flex; align-items:flex-end; padding:0 20px 22px;
    border-bottom:1px solid #eef2fe;
  }
  .rail{
    position:relative; width:100%; height:10px; background:var(--rail);
    border-radius:6px; overflow:hidden;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -1px 0 rgba(0,0,0,.05);
  }
  .sleepers{
    position:absolute; inset:0;
    display:grid; grid-auto-flow:column; grid-auto-columns:32px; align-items:stretch;
  }
  .sleepers div{ border-left:4px solid #b8c5dc; opacity:.7 }
  .train{
    position:absolute; bottom:46px; left:20px;
    font-size:34px;
    filter: drop-shadow(0 6px 8px rgba(0,0,0,.15));
    transition: transform .6s cubic-bezier(.2,.8,.2,1);
  }

  .content{
    padding:20px; display:grid; gap:16px;
    grid-template-columns: 1fr 260px;
  }
  @media (max-width:720px){
    .content{ grid-template-columns: 1fr; }
  }

  .card{
    background:#fff; border:1px solid #eef2fe; border-radius:12px;
    padding:16px; box-shadow:0 8px 24px rgba(0,0,0,.04);
  }
  .q{
    font-size:17px; line-height:1.7;
    /* innerHTMLã§imgã‚’å…¥ã‚Œã‚‹ã®ã§ pre-wrap ã¯æ®‹ã—ã¦OK */
    white-space:pre-wrap;
  }

  .inputs{
    margin-top:12px; display:grid; gap:8px;
  }
  .input-group{
    display:flex; flex-wrap:wrap; gap:4px 8px; align-items:center;
    font-size:15px;
  }
  .input-group label{
    min-width:120px;
  }
  .input-group input{
    font-size:17px; padding:6px 10px;
    border:1px solid #dfe6fb; border-radius:8px;
    width:120px; max-width:40vw;
  }
  .input-group input:focus{
    border-color:var(--accent);
    outline:none;
    box-shadow:0 0 0 3px rgba(47,125,255,.15);
  }

  .answer-row{
    display:flex; gap:10px; margin-top:14px; flex-wrap:wrap;
  }
  button{
    appearance:none; border:none; background:var(--accent); color:#fff;
    padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer;
    transition:transform .08s ease, box-shadow .2s ease, background .2s ease;
    box-shadow:0 8px 20px rgba(47,125,255,.25);
  }
  button:active{ transform: translateY(1px) }
  .btn-ghost{ background:#eef4ff; color:#2a5bd7; box-shadow:none }
  .btn-danger{ background:var(--ng); box-shadow:none }
  .btn-ok{ background:var(--ok); }

  .side{ display:grid; gap:12px; }
  .stat{ display:flex; justify-content:space-between; font-size:14px; color:var(--muted) }
  .progress{
    height:10px; background:#eef2fe; border-radius:999px; overflow:hidden;
  }
  .bar{ height:100%; width:0%; background:linear-gradient(90deg,#2f7dff,#5da7ff); transition: width .4s ease }

  .hint{
    color:#2a5bd7; font-size:14px; background:#f4f8ff;
    padding:8px 10px; border-radius:8px; border:1px solid #e6efff;
    margin-top:10px;
  }

  .result{
    display:none; font-size:18px; text-align:center; padding:8px 0; margin-top:4px;
  }
  .result.ok{ color:var(--ok) }
  .result.ng{ color:var(--ng) }

  .shake{ animation:shake .38s ease both }
  @keyframes shake{
    0%,100%{transform:translateX(0)}
    20%{transform:translateX(-6px)}
    40%{transform:translateX(6px)}
    60%{transform:translateX(-4px)}
    80%{transform:translateX(4px)}
  }
  .fade{ animation:fade .35s ease both }
  @keyframes fade{
    from{opacity:0; transform:translateY(6px)}
    to{opacity:1; transform:none}
  }

  footer{
    padding:12px 20px; border-top:1px solid #eef2fe;
    font-size:12px; color:var(--muted);
    display:flex; gap:8px; justify-content:space-between; flex-wrap:wrap;
  }
  .kbd{
    font-family: ui-monospace,"SFMono-Regular",Menlo,Consolas,monospace;
    background:#f3f5fa; border:1px solid #e5e9f5;
    padding:2px 6px; border-radius:6px;
  }
</style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title">
        <span class="train">ğŸš†</span>
        <span>é›»è»Šã§æ–‡ç« é¡Œãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ˆãƒ¬ãƒ™ãƒ«1ã€œ5ï¼‰</span>
      </div>
      <div class="meta">
        <div class="pill">å°4å‘ã‘ãƒ»åˆ†æ•°ã¨å‰²åˆ</div>
        <div><span id="totalTop">0</span>å• / ãœã‚“ã¶æ­£è§£ã§ã‚´ãƒ¼ãƒ«ï¼</div>
      </div>
    </header>

    <div class="track">
      <div class="rail">
        <div class="sleepers" id="sleepers"></div>
      </div>
      <div class="train" id="train" aria-hidden="true">ğŸš†</div>
    </div>

    <div class="content">
      <section class="card">
        <div class="q fade" id="question">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
        <div class="inputs" id="inputs"></div>

        <div class="answer-row">
          <button id="submit">ã“ãŸãˆã‚‹</button>
          <button id="prev" class="btn-ghost">ã‚‚ã©ã‚‹</button>
          <button id="next" class="btn-ghost">æ¬¡ã¸</button>
        </div>
        <div id="feedback" class="result" role="status" aria-live="polite"></div>
        <div id="hint" class="hint" style="display:none;"></div>
      </section>

      <aside class="side">
        <div class="card">
          <div class="stat">
            <span>é€²æ—</span>
            <span><b id="pos">1</b>/<span id="totalSide">0</span></span>
          </div>
          <div class="progress"><div class="bar" id="bar"></div></div>
        </div>
        <div class="card">
          <div class="stat">
            <span>ã‚¹ã‚³ã‚¢</span>
            <span><b id="score">0</b> ç‚¹ï¼ˆæ­£è§£1å•=10ç‚¹ï¼‰</span>
          </div>
          <div class="stat">
            <span>ãƒ™ã‚¹ãƒˆ</span>
            <span><b id="best">0</b> ç‚¹</span>
          </div>
        </div>
        <div class="card" style="display:grid; gap:8px;">
          <button id="shuffle" class="btn-ghost">é †ç•ªã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ã™ã‚‹</button>
          <button id="showHint" class="btn-ghost">ãƒ’ãƒ³ãƒˆ</button>
          <button id="restart" class="btn-danger">ã¯ã˜ã‚ã‹ã‚‰</button>
          <small style="color:var(--muted)">
            æ“ä½œãƒ’ãƒ³ãƒˆï¼š<span class="kbd">Enter</span> ã§å›ç­”ã€<span class="kbd">N</span> ã§æ¬¡ã¸
          </small>
        </div>
      </aside>
    </div>

    <footer>
      <div>Â© é›»è»Šã§å­¦ã¶ç®—æ•°ï¼ˆåˆ†æ•°ãƒ»å‰²åˆï¼‰ / ãƒ­ãƒ¼ã‚«ãƒ«ã§ãã®ã¾ã¾å‹•ãã¾ã™</div>
      <div>å•é¡Œã¯ <span class="kbd">questions</span> é…åˆ—ã‚’æ›¸ãæ›ãˆã‚‹ã ã‘ã§å·®ã—æ›¿ãˆOK</div>
    </footer>
  </div>

<script>
/* ===========================
   1) å‡ºé¡Œãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¬ãƒ™ãƒ«1ã€œ5ï¼‰
   å„å•é¡Œï¼štext / inputs[{label, answer}] / hint
   =========================== */
const questions = [
  // --- ãƒ¬ãƒ™ãƒ«1ï¼šåˆ†æ¯ãƒ»åˆ†å­ã‚’è‡ªåˆ†ã§å…¥ã‚Œã‚‹ ---
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«1-1ã€‘åˆ†æ¯ã¨åˆ†å­ã£ã¦ã©ã£ã¡ï¼Ÿï¼ˆãã®1ï¼‰

ã‚¯ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã¯
ãƒ»ç”·å­ï¼š18äºº
ãƒ»å¥³å­ï¼š12äºº ã§ã™ã€‚

ã€Œå¥³å­ã®äººæ•°ã¯ç”·å­ã®äººæ•°ã®ä½•åˆ†ã®ã„ãã¤ã§ã™ã‹ï¼Ÿã€

â–¡ï¼âšªï¸

æ¬¡ã®åˆ†æ•°ã®ã€ä¸Šï¼ˆåˆ†å­ï¼‰ã€ã€ä¸‹ï¼ˆåˆ†æ¯ï¼‰ã€ã«ã€
ãã‚Œãã‚Œ 12 ã¨ 18 ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "åˆ†å­ï¼ˆä¸Šã®æ•°â–¡ï¼‰", answer: "12" },
      { label: "åˆ†æ¯ï¼ˆä¸‹ã®æ•°âšªï¸ï¼‰", answer: "18" },
    ],
    hint: "ã€å¥³å­ã®äººæ•°ã¯ã€ç”·å­ã‚’1ã¨ã—ãŸã¨ãã®ã©ã‚Œãã‚‰ã„ï¼Ÿã€ãªã®ã§ã€ç”·å­18ãŒä¸‹ï¼ˆåˆ†æ¯ï¼‰ã€å¥³å­12ãŒä¸Šï¼ˆåˆ†å­ï¼‰ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«1-2ã€‘åˆ†æ¯ã¨åˆ†å­ã£ã¦ã©ã£ã¡ï¼Ÿï¼ˆãã®2ï¼‰

ã•ã£ãã®åˆ†æ•°ã¯ 12/18 ã§ã—ãŸã€‚
ã“ã‚Œã‚’ã§ãã‚‹ã ã‘å°ã•ãã—ã¾ã™ã€‚

â–¡ï¼âšªï¸

12/18 ã‚’ç´„åˆ†ã—ãŸåˆ†æ•°ã®
ã€ä¸Šï¼ˆåˆ†å­ï¼‰ã€ã€ä¸‹ï¼ˆåˆ†æ¯ï¼‰ã€ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "ç´„åˆ†ã—ãŸã‚ã¨ã®åˆ†å­ï¼ˆä¸Šã®æ•°â–¡ï¼‰", answer: "2" },
      { label: "ç´„åˆ†ã—ãŸã‚ã¨ã®åˆ†æ¯ï¼ˆä¸‹ã®æ•°âšªï¸ï¼‰", answer: "3" },
    ],
    hint: "12ã¨18ã¯6ã§å‰²ã‚Œã‚‹ â†’ 12Ã·6=2ã€18Ã·6=3 ãªã®ã§ 2/3ã€‚"
  },

  // --- ãƒ¬ãƒ™ãƒ«2ï¼š24Ã—3/4ï¼ˆå¼â†’è¨ˆç®—ï¼‰ ---
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«2-1ã€‘24äººã® 3/4 ã‚’å¼ã«ã—ã‚ˆã†

ã‚¢ãƒ¼ã‚¹ã•ã‚“ã®ã‚¯ãƒ©ã‚¹ã®ç”·å­ã®äººæ•°ã¯ 24äºº ã§ã€
å¥³å­ã®äººæ•°ã¯ ç”·å­ã®äººæ•°ã® 3/4 ã§ã™ã€‚

æ¬¡ã®å¼ã®3ã¤ã®â–¡ã€âšªï¸ã€â–³ã« 24ãƒ»3ãƒ»4 ã‚’å…¥ã‚Œã¦
æ­£ã—ã„å¼ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚

â–¡ Ã— âšªï¸ï¼â–³`,
    inputs: [
      { label: "å·¦ã®â–¡", answer: "24" },
      { label: "åˆ†å­âšªï¸", answer: "3" },
      { label: "åˆ†æ¯â–³", answer: "4" },
    ],
    hint: "ã€ç”·å­ã®äººæ•° Ã— 3/4ã€ã ã‹ã‚‰ã€24Ã—3/4ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«2-2ã€‘24äººã® 3/4 ã¯ä½•äººï¼Ÿ

ã•ã£ãä½œã£ãŸå¼ 24Ã—3/4 ã‚’è¨ˆç®—ã—ã¦ã€
å¥³å­ã®äººæ•°ã‚’æ±‚ã‚ã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "å¥³å­ã®äººæ•°", answer: "18" },
    ],
    hint: "24Ã·4=6ã€ãã®ã‚ã¨6Ã—3ã€‚"
  },

  // --- ãƒ¬ãƒ™ãƒ«3ï¼šåŒã˜å¼ã ã¨æ°—ã¥ã‹ã›ã‚‹ ---
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«3-1ã€‘å‰²åˆã¨ã—ã¦ 3/4 ã‚’è€ƒãˆã‚‹

ã‚¢ãƒ¼ã‚¹ã•ã‚“ã®ã‚¯ãƒ©ã‚¹ã®ç”·å­ã¯ 24äººã€‚
ç”·å­ã«å¯¾ã™ã‚‹å¥³å­ã®å‰²åˆã¯ 3/4 ã§ã™ã€‚

å¥³å­ã®äººæ•°ã‚’æ±‚ã‚ã‚‹å¼ã‚’å®Œæˆã•ã›ã¾ã—ã‚‡ã†ã€‚

â–¡ Ã— âšªï¸ï¼â–³

ï¼ˆ24ãƒ»3ãƒ»4 ã‚’1å›ãšã¤ä½¿ã„ã¾ã™ï¼‰`,
    inputs: [
      { label: "å·¦ã®â–¡", answer: "24" },
      { label: "åˆ†å­âšªï¸", answer: "3" },
      { label: "åˆ†æ¯â–³", answer: "4" },
    ],
    hint: "ãƒ¬ãƒ™ãƒ«2-1ã¨åŒã˜è€ƒãˆæ–¹ã ã‚ˆã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«3-2ã€‘24äººã® 3/4 ã‚’è¨ˆç®—ã—ã‚ˆã†

ãƒ¬ãƒ™ãƒ«3-1ã®å¼ 24Ã—3/4 ã‚’ä½¿ã£ã¦ã€
å¥³å­ã®äººæ•°ã‚’æ±‚ã‚ã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "å¥³å­ã®äººæ•°", answer: "18" },
    ],
    hint: "24Ã·4=6ã€ãã®ã‚ã¨6Ã—3ã€‚"
  },

  // --- ãƒ¬ãƒ™ãƒ«4ï¼š45äººã¯å…¨ä½“ã® 5/9 ---
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«4-1ã€‘ç·šåˆ†å›³ã§ã€Œã¶ã‚“ã€ã‚’è€ƒãˆã‚ˆã†

ã‚¸ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã®äººæ•°ã¯ 45äºº ã§ã€
ã“ã‚Œã¯ å­¦å¹´å…¨ä½“ã®äººæ•°ã® 5/9ï¼ˆã”ã¶ã‚“ã®ãã‚…ã†ã¶ã‚“ï¼‰ ã«ã‚ãŸã‚Šã¾ã™ã€‚
å­¦å¹´å…¨ä½“ã®äººæ•°ã¯ä½•äººã§ã™ã‹ï¼Ÿ

ã€ŒÃ· 5/9ã€ã£ã¦ã©ã†ã„ã†æ„å‘³ï¼Ÿ

<img src="Q7.png" alt="ç·šåˆ†å›³ Q7" style="max-width:100%;height:auto;">

ã¤ãã® â–¡ ã«æ•°å­—ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "ã‚¸ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã¯å…¨ä½“ã®ä½•ã¶ã‚“ï¼Ÿï¼ˆåˆ†å­ï¼‰", answer: "5" },
      { label: "å­¦å¹´å…¨ä½“ã¯ä½•ã¶ã‚“ã«åˆ†ã‘ã¦è€ƒãˆã‚‹ï¼Ÿï¼ˆåˆ†æ¯ï¼‰", answer: "9" },
    ],
    hint: "5/9 ã®ã€9ã€ãŒå…¨ä½“ã®ã¶ã‚“ã€ã€5ã€ãŒã‚¸ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã®ã¶ã‚“ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«4-2ã€‘ã¾ãšã€Œ1ã¤åˆ†ã€ã‚’è¦‹ã¤ã‘ã‚‹

ã‚¸ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã®äººæ•°ã¯ 45äºº ã§ã€
ã“ã‚Œã¯ å­¦å¹´å…¨ä½“ã®äººæ•°ã® 5/9ï¼ˆã”ã¶ã‚“ã®ãã‚…ã†ã¶ã‚“ï¼‰ ã«ã‚ãŸã‚Šã¾ã™ã€‚
å­¦å¹´å…¨ä½“ã®äººæ•°ã¯ä½•äººã§ã™ã‹ï¼Ÿ

<img src="Q8.png" alt="ç·šåˆ†å›³ Q8" style="max-width:100%;height:auto;">

5ã¤åˆ†ãŒ45äººãªã®ã§ã€1ã¤åˆ†ã¯...

â–¡äºº Ã· âšªï¸ = â–³äºº

3ã¤ã®â–¡ã« 45ãƒ»5ãƒ»9 ã‚’ä¸€å›ãšã¤å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "åˆ†å­ï¼ˆä¸Šã®â–¡ï¼‰", answer: "45" },
      { label: "åˆ†æ¯ï¼ˆä¸‹ã®âšªï¸ï¼‰", answer: "5" },
      { label: "å³ã®â–³", answer: "9" },
    ],
    hint: "45äºº Ã· 5 = 9äºº"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«4-3ã€‘å­¦å¹´å…¨ä½“ã®äººæ•°ã‚’æ±‚ã‚ã‚ˆã†

ã‚¸ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã®äººæ•°ã¯ 45äºº ã§ã€
ã“ã‚Œã¯ å­¦å¹´å…¨ä½“ã®äººæ•°ã® 5/9ï¼ˆã”ã¶ã‚“ã®ãã‚…ã†ã¶ã‚“ï¼‰ ã«ã‚ãŸã‚Šã¾ã™ã€‚
å­¦å¹´å…¨ä½“ã®äººæ•°ã¯ä½•äººã§ã™ã‹ï¼Ÿ

1ã¤åˆ†ãŒ9äººãªã®ã§ã€9ã¤åˆ†ã¯...

â–¡äºº Ã— âšªï¸ = â–³äºº

3ã¤ã®â–¡ã« 81ãƒ»9ãƒ»9 ã‚’1å›ãšã¤å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚`,
    inputs: [
      { label: "å·¦ã®â–¡", answer: "9" },
      { label: "çœŸã‚“ä¸­ã®âšªï¸", answer: "9" },
      { label: "å³ã®â–³", answer: "81" },
    ],
    hint: "9äºº Ã— 9 = 81äºº"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«4-4ã€‘ãªãœã€Œ45 Ã· 5/9 = 45 Ã— 9/5ã€ã«ãªã‚‹ã®ï¼Ÿ


ã‚¸ãƒ¼ãƒ‹ãƒ¼å›ã®ã‚¯ãƒ©ã‚¹ã®äººæ•°ã¯ 45äºº ã§ã€
ã“ã‚Œã¯ å­¦å¹´å…¨ä½“ã®äººæ•°ã® 5/9ï¼ˆã”ã¶ã‚“ã®ãã‚…ã†ã¶ã‚“ï¼‰ ã«ã‚ãŸã‚Šã¾ã™ã€‚
å­¦å¹´å…¨ä½“ã®äººæ•°ã¯ä½•äººã§ã™ã‹ï¼Ÿ

è€ƒãˆæ–¹ï¼šåˆ†æ•°ã§å‰²ã‚‹ã“ã¨ã¯ã€é€†æ•°ã‚’ã‹ã‘ã‚‹ã“ã¨
å…·ä½“ä¾‹ã§ç†è§£ã—ã‚ˆã†ï¼š
ã€Œ45 Ã· 5/9ã€ã‚’2ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†ã‘ã‚‹ã¨...

ã¾ãš5ã§å‰²ã‚‹ï¼ˆ5ã¤åˆ†ã‹ã‚‰1ã¤åˆ†ã¸ï¼‰
45 Ã· 5 = 9

æ¬¡ã«9ã‚’ã‹ã‘ã‚‹ï¼ˆ1ã¤åˆ†ã‹ã‚‰9ã¤åˆ†ã¸ï¼‰
9 Ã— 9 = 81

ã“ã‚Œã‚’ã¾ã¨ã‚ã‚‹ã¨ï¼š
45 Ã· 5/9 = 45 Ã· 5 Ã— 9 = 45 Ã— 1/5 Ã— 9 = 45 Ã— 9/5 = â–¡`,
    inputs: [
      { label: "å­¦å¹´å…¨ä½“ã®äººæ•°", answer: "81" },
    ],
    hint: "45Ã·5=9ã€ãã®ã‚ã¨9Ã—9ã€‚"
  },

  // --- ãƒ¬ãƒ™ãƒ«5 (1)ï¼š200ãƒšãƒ¼ã‚¸ã® 1/5 ---
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(1)-1ã€‘å•1ï¼‰1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

å•1ï¼‰1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ

ã‚¹ãƒ†ãƒƒãƒ—1ï¼šã€Œå…¨ä½“ã®1/5ã€ã®æ„å‘³ã‚’è€ƒãˆã‚ˆã†
ã€Œå…¨ä½“ã®1/5ã€ã¨ã„ã†ã®ã¯ã€200ãƒšãƒ¼ã‚¸ã‚’5ã¤ã«åˆ†ã‘ãŸ 1ã¤åˆ† ã¨ã„ã†æ„å‘³ã ã‚ˆ

<img src="Q11_12.png" alt="æœ¬ã®å›³ Q11/Q12" style="max-width:100%;height:auto;">`,
    inputs: [
      { label: "å…¨ä½“ã¯ä½•ãƒšãƒ¼ã‚¸ï¼Ÿ", answer: "200" },
      { label: "èª­ã‚“ã ã®ã¯ä½•ã¶ã‚“ï¼Ÿï¼ˆåˆ†å­ï¼‰", answer: "1" },
      { label: "å…¨ä½“ã‚’ä½•åˆ†ã«åˆ†ã‘ã‚‰ã‚Œã‚‹ï¼Ÿï¼ˆåˆ†æ¯ï¼‰", answer: "5" },
    ],
    hint: "200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã‚’5ã«åˆ†ã‘ãŸã†ã¡ã®ï¼‘ã¤ã‚’èª­ã‚“ã ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(1)-2ã€‘å•1ï¼‰1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

å…¨ä½“ã‚’5ã¤ã«åˆ†ã‘ã‚‹ã¨ã€1ã¤åˆ†ã¯?

<img src="Q11_12.png" alt="æœ¬ã®å›³ Q11/Q12" style="max-width:100%;height:auto;">

â–¡ Ã— âšªï¸ï¼â–³ = ?`,
    inputs: [
      { label: "å·¦ã®â–¡", answer: "200" },
      { label: "çœŸã‚“ä¸­ã®âšªï¸ï¼ˆåˆ†å­ï¼‰", answer: "1" },
      { label: "å³ã®â–³ï¼ˆåˆ†æ¯ï¼‰", answer: "5" },
    ],
    hint: "200ãƒšãƒ¼ã‚¸ã®1/5ãªã®ã§å…¨ä½“200ãƒšãƒ¼ã‚¸ã®5ã¶ã‚“ã®ã†ã¡1ã¶ã‚“ã‚’èª­ã‚€ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(1)-3ã€‘å•1ï¼‰1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

1æ—¥ç›®ã«èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°ã‚’æ±‚ã‚ã¾ã—ã‚‡ã†ã€‚
200 Ã— 1ï¼5 = ?`,
    inputs: [
      { label: "1æ—¥ç›®ã«èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°", answer: "40" },
    ],
    hint: "200Ã—1/5ã€‚200Ã·5=40ã€‚"
  },

  // --- ãƒ¬ãƒ™ãƒ«5 (2)ï¼šæ®‹ã‚Š160ãƒšãƒ¼ã‚¸ã® 7/10 + åˆè¨ˆ ---
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(2)-1ã€‘å•2ï¼‰ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã®æœ¬ã‚’ã€1æ—¥ç›®ã«40ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã€‚
1æ—¥ç›®ã®å¾Œã€ä½•ãƒšãƒ¼ã‚¸æ®‹ã£ã¦ã„ã‚‹ï¼Ÿ

<img src="Q14.png" alt="æœ¬ã®å›³ Q14" style="max-width:100%;height:auto;">

æœ¬å…¨ä½“ã®ãƒšãƒ¼ã‚¸æ•°ãƒ»1æ—¥ç›®ã«èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°ãƒ»æ®‹ã‚Šã®ãƒšãƒ¼ã‚¸æ•°ã‚’
ãã‚Œãã‚Œâ–¡ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚

â–¡  âˆ’ âšªï¸  = â–³ ãƒšãƒ¼ã‚¸`,
    inputs: [
      { label: "å·¦ã®â–¡ æœ¬å…¨ä½“ã®ãƒšãƒ¼ã‚¸æ•°", answer: "200" },
      { label: "çœŸã‚“ä¸­ã®âšªï¸ 1æ—¥ç›®ã«èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°", answer: "40" },
      { label: "å³ã®â–³ æ®‹ã‚Šã®ãƒšãƒ¼ã‚¸æ•°", answer: "160" },
    ],
    hint: "æ®‹ã‚Šã¯ 200âˆ’40 = 160ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(2)-2ã€‘å•2ï¼‰ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

1æ—¥ç›®ã«40ãƒšãƒ¼ã‚¸èª­ã‚“ã ã‹ã‚‰ã€æ®‹ã‚Šã¯ 160ãƒšãƒ¼ã‚¸ ã ã­ã€‚
ã€Œæ®‹ã‚Šã®7/10ã€ã®æ„å‘³ã‚’è€ƒãˆã‚ˆã†ã€‚
2æ—¥ç›®ã¯ã€Œæ®‹ã‚Šã® 7/10ã€ã‚’èª­ã‚“ã ã€‚

<img src="Q15.png" alt="æ®‹ã‚Šãƒšãƒ¼ã‚¸ã®å›³ Q15" style="max-width:100%;height:auto;">

ã¤ã¾ã‚Šã€â–¡ãƒšãƒ¼ã‚¸ã‚’  âšªï¸å€‹ã«åˆ†ã‘ãŸ â–³ã¤åˆ† ã¨ã„ã†æ„å‘³ã ã‚ˆã€‚
â–¡ x â–³ / âšªï¸ =? `,
    inputs: [
      { label: "å·¦ã®â–¡ï¼ˆæ®‹ã‚Šã®ãƒšãƒ¼ã‚¸ï¼‰", answer: "160" },
      { label: "åˆ†å­ï¼ˆä¸Šã®â–³ï¼‰", answer: "7" },
      { label: "åˆ†æ¯ï¼ˆä¸‹ã®âšªï¸ï¼‰", answer: "10" },
    ],
    hint: "160ãƒšãƒ¼ã‚¸ã‚’10å€‹ã«åˆ†ã‘ãŸ 7ã¤åˆ† ã¨ã„ã†æ„å‘³ã ã‚ˆã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(2)-3ã€‘å•2ï¼‰ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

2æ—¥ç›®ã«èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°ã‚’è¨ˆç®—ã—ã‚ˆã†ã€‚
160ãƒšãƒ¼ã‚¸ã‚’10å€‹ã«åˆ†ã‘ãŸ 7ã¤åˆ† ã¨ã„ã†æ„å‘³ã ã‹ã‚‰ã€

æ®‹ã‚Šã‚’10ã«åˆ†ã‘ã‚‹ã¨ã€1ã¤åˆ†ã¯
160 Ã· 10 = 16ãƒšãƒ¼ã‚¸

ãã®7ã¤åˆ†ï¼ˆ7/10ï¼‰ã¯
16 Ã— 7 = â–¡ãƒšãƒ¼ã‚¸`,
    inputs: [
      { label: "2æ—¥ç›®ã«èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°", answer: "112" },
    ],
    hint: "16 Ã— 7 = 112ãƒšãƒ¼ã‚¸ã€‚"
  },
  {
    text: `ã€ãƒ¬ãƒ™ãƒ«5(2)-4ã€‘å•2ï¼‰ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

200ãƒšãƒ¼ã‚¸ã‚ã‚‹æœ¬ã‚’ã€1æ—¥ç›®ã« å…¨ä½“ã® 1/5 ã‚’èª­ã‚“ã ã€‚2æ—¥ç›®ã« æ®‹ã‚Šã® 7/10 ã‚’èª­ã‚“ã ã€‚
ã“ã‚Œã«ã¤ã„ã¦ã€æ¬¡ã®å•ã„ã«ç­”ãˆãªã•ã„ã€‚
1) 1æ—¥ç›®ã«ã¯ä½•ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã‹ï¼Ÿ
2) ï¼’æ—¥é–“ã§èª­ã‚“ã ã®ã¯å…¨éƒ¨ã§ä½•ãƒšãƒ¼ã‚¸ã§ã™ã‹ï¼Ÿ

1æ—¥ç›®ã«40ãƒšãƒ¼ã‚¸ã€
2æ—¥ç›®ã«112ãƒšãƒ¼ã‚¸èª­ã¿ã¾ã—ãŸã€‚

2æ—¥é–“ã§èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°ã®åˆè¨ˆã‚’æ±‚ã‚ã¾ã—ã‚‡ã†ã€‚

1æ—¥ç›® + 2æ—¥ç›® = â–¡ãƒšãƒ¼ã‚¸`,
    inputs: [
      { label: "2æ—¥é–“ã§èª­ã‚“ã ãƒšãƒ¼ã‚¸æ•°ã®åˆè¨ˆ", answer: "152" },
    ],
    hint: "40 + 112 = 152ãƒšãƒ¼ã‚¸ã€‚"
  },
];

/* ===========================
   2) çŠ¶æ…‹ãƒ»è¦ç´ å–å¾—
   =========================== */
let order = [...questions.keys()];
let idx = 0;
let score = 0;
let best = Number(localStorage.getItem("train_quiz_best_lv15_multi") || 0);

const $ = (s)=>document.querySelector(s);
const qEl = $("#question");
const inputsEl = $("#inputs");
const submitBtn = $("#submit");
const nextBtn = $("#next");
const prevBtn = $("#prev");
const feedback = $("#feedback");
const hintEl = $("#hint");
const posEl = $("#pos");
const totalSideEl = $("#totalSide");
const totalTopEl = $("#totalTop");
const barEl = $("#bar");
const scoreEl = $("#score");
const bestEl = $("#best");
const trainEl = $("#train");
const sleepers = $("#sleepers");

/* ãƒ¬ãƒ¼ãƒ«ã®æ•æœ¨ï¼ˆè¦‹ãŸç›®ã ã‘ï¼‰ */
function buildSleepers(n=40){
  sleepers.innerHTML = "";
  for(let i=0;i<n;i++){
    sleepers.appendChild(document.createElement("div"));
  }
}
buildSleepers();

/* ===========================
   3) è¡¨ç¤ºãƒ»ãƒ­ã‚¸ãƒƒã‚¯
   =========================== */
function render(){
  const i = order[idx];
  const total = questions.length;
  const q = questions[i];

  // â˜… ã“ã“ã‚’ textContent â†’ innerHTML ã«å¤‰æ›´
  qEl.innerHTML = q.text;
  qEl.classList.remove("shake");
  qEl.classList.add("fade");

  // å…¥åŠ›æ¬„ã‚’ä½œã‚Šç›´ã™
  inputsEl.innerHTML = "";
  q.inputs.forEach((inp, j)=>{
    const wrap = document.createElement("div");
    wrap.className = "input-group";

    const lab = document.createElement("label");
    lab.textContent = inp.label;

    const input = document.createElement("input");
    input.type = "number";
    input.className = "answer-input";
    input.dataset.index = String(j);

    wrap.appendChild(lab);
    wrap.appendChild(input);
    inputsEl.appendChild(wrap);
  });

  // æœ€åˆã®å…¥åŠ›ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
  const firstInput = inputsEl.querySelector(".answer-input");
  if(firstInput) firstInput.focus({ preventScroll:true });

  feedback.style.display = "none";
  hintEl.style.display = "none";

  posEl.textContent = idx+1;
  totalSideEl.textContent = total;
  totalTopEl.textContent = total;

  barEl.style.width = `${(idx)/(total)*100}%`;
}

function moveTrain(){
  const total = questions.length;
  const track = document.querySelector(".track");
  const leftPad = 20, rightPad = 20;
  const usable = track.clientWidth - (leftPad + rightPad) - 40; // ã–ã£ãã‚Š
  const step = usable / total;
  const x = leftPad + step * (idx+1);
  trainEl.style.transform = `translateX(${x}px)`;
}

function judge(){
  const i = order[idx];
  const q = questions[i];
  const inputEls = inputsEl.querySelectorAll(".answer-input");
  let ok = true;

  inputEls.forEach((input, j)=>{
    const user = String(input.value ?? "").trim();
    const expected = String(q.inputs[j].answer).trim();
    if(user === "" || user !== expected){
      ok = false;
    }
  });

  feedback.style.display = "block";
  feedback.className = "result " + (ok ? "ok" : "ng");
  feedback.textContent = ok ? "âœ… æ­£è§£ï¼" : "âŒ ã¡ãŒã†ã‚ˆâ€¦ ã‚‚ã†ä¸€åº¦è€ƒãˆã¦ã¿ã‚ˆã†";

  if(ok){
    score += 10;
    scoreEl.textContent = score;
    moveTrain();
    nextBtn.focus();
  }else{
    qEl.classList.remove("fade");
    void qEl.offsetWidth; // reflow
    qEl.classList.add("shake");
  }
}

function next(){
  if(idx < questions.length-1){
    idx++;
    render();
  }else{
    barEl.style.width = "100%";
    feedback.style.display = "block";
    feedback.className = "result ok";
    feedback.textContent = `ğŸ‰ ã‚´ãƒ¼ãƒ«ï¼ã‚¹ã‚³ã‚¢ã¯ ${score} ç‚¹ã§ã—ãŸ`;
    if(score > best){
      best = score;
      localStorage.setItem("train_quiz_best_lv15_multi", String(best));
    }
    bestEl.textContent = best;
  }
}

function prev(){
  if(idx > 0){
    idx--;
    render();
  }
}

/* ===========================
   4) ã‚¤ãƒ™ãƒ³ãƒˆ
   =========================== */
submitBtn.addEventListener("click", judge);
nextBtn.addEventListener("click", next);
prevBtn.addEventListener("click", prev);

$("#restart").addEventListener("click", ()=>{
  score = 0; scoreEl.textContent = "0";
  idx = 0; order = [...questions.keys()];
  trainEl.style.transform = "translateX(0px)";
  render();
});

$("#shuffle").addEventListener("click", ()=>{
  order = [...questions.keys()];
  for(let i=order.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [order[i], order[j]] = [order[j], order[i]];
  }
  idx = 0; score = 0; scoreEl.textContent = "0";
  trainEl.style.transform = "translateX(0px)";
  render();
});

$("#showHint").addEventListener("click", ()=>{
  const i = order[idx];
  hintEl.textContent = "ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼š " + (questions[i].hint || "å•é¡Œæ–‡ã‚’ã‚ˆãèª­ã‚‚ã†ï¼");
  hintEl.style.display = "block";
});

/* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ */
document.addEventListener("keydown", (e)=>{
  if(e.key === "Enter"){ judge(); }
  if(e.key.toLowerCase() === "n"){ next(); }
});

/* åˆæœŸåŒ– */
(function init(){
  bestEl.textContent = best;
  scoreEl.textContent = score;
  totalSideEl.textContent = questions.length;
  totalTopEl.textContent = questions.length;
  render();
})();
</script>
</body>
</html>
